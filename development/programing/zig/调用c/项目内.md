# 项目内

## 说明

依赖库包含在项目内，源码级引用

## 例子

duktape 为三方库

### 结构

```sh
├── build.zig
├── build.zig.zon
├── libs
│   └── duktape
│       ├── duk_config.h
│       ├── duktape.c
│       └── duktape.h
└── src
    ├── lib_wrapper
    │   ├── js.c
    │   └── js.h
    ├── main.zig
    └── root.zig
```

### 代码

main.zig

```zig
const std = @import("std");

const js = @cImport({
    @cInclude("lib_wrapper/js.h");
});

pub fn main() !void {
    js.demo();
}
```

js.h

```h
#pragma once

void demo();
```

js.c

```c
#include "js.h"
#include "duktape.h"

void demo() {
  duk_context *ctx = duk_create_heap_default();
  duk_eval_string(ctx, "1+2");
  printf("1+2=%d\n", (int) duk_get_int(ctx, -1));
  duk_destroy_heap(ctx);
}
```

### 构建

build.zig

```zig
// 三方 c 库
exe.addIncludePath(b.path("libs/duktape"));
exe.addCSourceFile(.{
    .file = b.path("libs/duktape/duktape.c"),
    .flags = &.{"-std=c99"},
});

// 二次封装库
exe.addIncludePath(b.path("src/lib_wrapper"));
exe.addCSourceFile(.{
    .file = b.path("src/lib_wrapper/js.c"),
    .flags = &.{"-std=c99"},
});

// main.zig 里面 import
exe.addIncludePath(b.path("src"));

exe.linkSystemLibrary("c");
exe.linkSystemLibrary("stdc++");
```
