# 配置文件

## 说明

release 模式才支持

最外层的 rebar.config 内配置

## 例子

### sys.config

```erlang
{sys_config, "config/sys.config"}.
```

sys.config

```erlang
[
  {app1,[
    {key1, aaa},
    {key2, bbb},
    {key3, ccc}
  ]}
].
```

### sys.config.src

支持环境变量， 编译以后，会自动生成 sys.config

```erlang
{sys_config_src, "config/sys.config.src"}
```

sys.config.src

```erlang
[
  % demo1 为 被加载的 application
  {demo1,[
    {key1, "${AAA}"},
    {key2, "${BBB}"},
    {key3, ccc}
  ]}
].
```

### 多应用

无法拆分，只能写在一起

```erlang
[
  % demo1, demo2 等要在 release 的 app.src 里面注册
  {demo1,[
    {key1, "${AAA}"},
    {key2, "${BBB}"},
    {key3, ccc}
  ]},

  {demo2,[
    {key1, aaa},
    {key2, bbb},
    {key3, ccc}
  ]}
].
```

### 测试

```erlang
application:get_all_env(app1).
application:get_env(app1, key3).
```

```sh
rebar3 as prod release
```

```sh
export AAA=zzz; export BBB=yyy
_build/prod/rel/xxx/bin/xxx console
```

```erlang
application:get_all_env(app1).
application:get_env(app1, key2).
```
