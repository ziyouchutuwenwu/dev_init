# 库相关

## 说明

postgres 为超级用户，对所有 db 都有权限

```sh
sudo su postgres
psql
```

## 常见用法

| mysql               | pgsql   |
| ------------------- | ------- |
| help                | \?      |
| show databases      | \l      |
| use xxx             | \c xxx  |
| show tables         | \dt     |
| show index from xxx | \di xxx |
| desc xxx            | \d xxx  |

## 用法

建库

```sh
# shell 下
createdb -O demo_user demo_db;
```

```sql
-- psql 下
create database demo_db owner demo_user;
grant all privileges on database demo_db to demo_user;
\c demo_db;
alter schema public owner to demo_user;
grant all privileges on all sequences in schema public to demo_user;
grant all privileges on all tables in schema public to demo_user;
```

切换数据库

```sql
\connect demo_db demo_user
```

删库

```sql
\c postgres
\l
\conninfo

-- 断开所有链接
select pg_terminate_backend(pid)
from pg_stat_activity
where datname = 'demo_db';

drop database if exists demo_db;

\l
```
