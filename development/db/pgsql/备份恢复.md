# 备份恢复

## 单库

```sh
pg_dump -h 127.0.0.1 -p 5432 -U demo_user -d demo_db -F c -f demo_db.dump

# 先建库
pg_restore -h 127.0.0.1 -p 5432 -U demo_user -d demo_db demo_db.dump

# -C 为自动建库，-d 为需要先连的数据库
pg_restore -h 127.0.0.1 -p 5432 -U postgres -d postgres -C demo_db.dump
```

## 整库

```sh
pg_dumpall -h 127.0.0.1 -p 5432 -U postgres -f db.out

# dump_all 里面有建库语句，所以会自动建库
psql -h 127.0.0.1 -p 5432 -U postgres -d postgres -f db.out
```
