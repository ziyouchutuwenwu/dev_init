# 认证方式

## 说明

| 类型  | 数据库      | 用户 | 地址/范围    | 认证方式      | 特点                                                                |
| ----- | ----------- | ---- | ------------ | ------------- | ------------------------------------------------------------------- |
| local | all         | all  | —            | peer          | peer 用系统用户名登陆，无需密码；系统用户名必须与数据库用户名一致。 |
| host  | all         | all  | 127.0.0.1/32 | scram-sha-256 | SCRAM-SHA-256 比 md5 更安全                                         |
| host  | all         | all  | ::1/128      | scram-sha-256 | ipv6                                                                |
| local | replication | all  | —            | peer          | 有 replication 权限的用户，本地无密码登陆                           |
| host  | replication | all  | 127.0.0.1/32 | scram-sha-256 | 有 replication 权限的用户，配置 ipv4                                |
| host  | replication | all  | ::1/128      | scram-sha-256 | 有 replication 权限的用户，配置 ipv6                                |
| host  | all         | all  | 0.0.0.0/0    | scram-sha-256 | 自己加的                                                            |

## 配置

```sh
cd /etc/postgresql/版本号/main
```

pg_hba.conf

```conf
# postgres 之外的账户，都用密码登陆
# local all all 用密码登陆
local   all             all                                     scram-sha-256

# 所有的都用密码验证
host    all             all             0.0.0.0/0               scram-sha-256
```
