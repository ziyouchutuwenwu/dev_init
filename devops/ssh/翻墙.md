# 翻墙

## 分类

### 本机代理

```sh
#!/usr/bin/env /bin/bash

CURRENT_DIR=$(cd "$(dirname "$0")";pwd)

VPS=root@xx.xx.xx.xx

# 这里指定私钥
autossh -M 0 -i $CURRENT_DIR/keys/key \
  -o "StrictHostKeyChecking no" \
  -o "ServerAliveInterval 30" \
  -o "ServerAliveCountMax=3" \
  -o "ExitOnForwardFailure=yes" \
  -CND 0.0.0.0:1080 \
  -- "$VPS"
```

### 跳板机

```sh
#!/usr/bin/env bash

CURRENT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

eval "$(ssh-agent -s)"
trap 'ssh-agent -k' EXIT
ssh-add "$CURRENT_DIR/keys/key" >/dev/null 2>&1

VPS="root@xx.xx.xx.xx"

JUMPS=(
  "root@aa.aa.aa.aa"
  "root@bb.bb.bb.bb"
  "root@cc.cc.cc.cc"
)

IFS=','; JUMP_STR="${JUMPS[*]}"; unset IFS

# 这里用 ssh-add
autossh -M 0 \
  -o "StrictHostKeyChecking=no" \
  -o "ServerAliveInterval=30" \
  -o "ServerAliveCountMax=3" \
  -o "ExitOnForwardFailure=yes" \
  -CND 0.0.0.0:1080 \
  -J "$JUMP_STR" \
  -- "$VPS"
```
