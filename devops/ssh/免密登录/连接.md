# 连接

## 场景

本地和服务器做免密

## 配置

### 密钥

如果多个服务器都要免密，所有的服务器上都要有公钥

### 启动

手动

```sh
eval "$(ssh-agent -s)"
chmod 600 ~/.ssh/id_rsa
ssh-add ~/.ssh/id_rsa
```

~/.profile

```sh
if ! pgrep -u "$USER" ssh-agent > /dev/null; then
    eval "$(ssh-agent -s 2> /dev/null | grep -v 'Agent pid')" > /dev/null
    trap 'ssh-agent -k > /dev/null 2>&1' EXIT
fi
chmod 600 ~/downloads/keys/key
ssh-add ~/downloads/keys/key > /dev/null 2>&1
```

## 调试

```sh
# 删除
ssh-add -d ~/.ssh/id_rsa

# 删除所有
ssh-add -D

# 查看
ssh-add -L
```
